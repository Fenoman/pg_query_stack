-- Тест 007: Стабильность работы после ошибки
-- Сначала вызовем запрос с ошибкой (деление на ноль)
SELECT 1/0;
ERROR:  division by zero
-- Затем проверим, что pg_query_stack продолжает работать корректно
-- Это важный тест для проверки отсутствия сегментации памяти
SELECT * FROM pg_query_stack(0);
 frame_number |            query_text            
--------------+----------------------------------
            0 | SELECT * FROM pg_query_stack(0);
(1 row)

